<main>
    <div class="container body-content jumbotron">
        <div class="row">
            <div class="col-md-12">

                <div class="col-md-3">
                    <img th:src="${review.imageUrl}" class="img-responsive" style="padding-top: 15px"/>
                </div>

                <review class="col-md-9">
                    <header>
                        <h2 th:text="${review.title}" style="font-size: 50px"></h2>
                        <h3 th:inline="text"><i>[[${review.score}]] / 10&nbsp;</i>
                            <span th:if="${review.score == 10}" style="font-size: 35px">★★★★★</span>
                            <span th:if="${review.score == 9}" style="font-size: 35px">★★★★★</span>
                            <span th:if="${review.score == 8}" style="font-size: 35px">★★★★☆</span>
                            <span th:if="${review.score == 7}" style="font-size: 35px">★★★★☆</span>
                            <span th:if="${review.score == 6}" style="font-size: 35px">★★★☆☆</span>
                            <span th:if="${review.score == 5}" style="font-size: 35px">★★★☆☆</span>
                            <span th:if="${review.score == 4}" style="font-size: 35px">★★☆☆☆</span>
                            <span th:if="${review.score == 3}" style="font-size: 35px">★★☆☆☆</span>
                            <span th:if="${review.score == 2}" style="font-size: 35px">★☆☆☆☆</span>
                            <span th:if="${review.score == 1}" style="font-size: 35px">★☆☆☆☆</span>
                        </h3>
                    </header>

                    <p th:text="${review.content}"> </p>

                    <small class="author" th:text="${review.author.fullName}"></small>

                    <footer>
                        <div class="pull-left">
                            <h2 id="circle" style="padding-top: 7px; padding-right: 2px" class = "pull-left text-center" th:inline="text"><b>[[${review.upvoteCount}]]</b></h2>

                            <h2 class="pull-right" th:inline="text" th:if="${review.upvoteCount != 1}" style="font-size: 30px; padding-left: 10px; padding-top: 8px">Upvotes</h2>
                            <h2 class="pull-right" th:inline="text" th:if="${review.upvoteCount == 1}" style="font-size: 30px; padding-left: 10px; padding-top: 8px">Upvote</h2>
                        </div>

                        <div class="pull-right" id="buttons" style="padding-top: 25px">
                            <form  sec:authorize="isAuthenticated()"
                                   th:if="${!user.hasUpvoted(review) AND !user.isAuthor(review)}"
                                   class="pull-left"
                                   style="padding-right: 3px"
                                   th:action="@{/review/{id}(id=${review.id})}"
                                   method="POST">

                                <input class="btn btn-success btn"
                                       type="submit"
                                       value="UPVOTE"
                                />
                            </form>

                            <button sec:authorize="isAuthenticated()"
                                    th:if="${user.hasUpvoted(review)}"
                                    class="btn btn-success btn disabled">
                                You have upvoted this review.
                            </button>

                            <a sec:authorize="isAnonymous()"
                               class="btn btn-primary btn"
                               th:href="@{/login}">
                                Login to upvote reviews.
                            </a>

                            <th:block sec:authorize="isAuthenticated()" th:if="${user.isAdmin() OR user.isAuthor(review)}">
                                <a class="btn btn-success btn" th:href="@{/review/edit/{id}(id = ${review.id})}">Edit</a>
                                <a class="btn btn-danger btn-" th:href="@{/review/delete/{id}(id = ${review.id})}">Delete</a>
                            </th:block>

                            <a class="btn btn-default btn" th:href="@{/}">Back ➤</a>

                        </div>
                    </footer>
                </review>
            </div>
        </div>
    </div>
</main>
